<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Functionality of the OpenImageR package • OpenImageR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Functionality of the OpenImageR package">
<meta property="og:description" content="OpenImageR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">OpenImageR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Gabor_Feature_Extraction.html">Gabor Feature extraction</a>
    </li>
    <li>
      <a href="../articles/Image_segmentation_superpixels_clustering.html">Image segmentation based on Superpixels and Clustering</a>
    </li>
    <li>
      <a href="../articles/The_OpenImageR_package.html">Functionality of the OpenImageR package</a>
    </li>
    <li>
      <a href="../articles/Warp_Affine.html">Warp Affine using R</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlampros/OpenImageR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Functionality of the OpenImageR package</h1>
                        <h4 data-toc-skip class="author">Lampros
Mouselimis</h4>
            
            <h4 data-toc-skip class="date">2023-04-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mlampros/OpenImageR/blob/HEAD/vignettes/The_OpenImageR_package.Rmd" class="external-link"><code>vignettes/The_OpenImageR_package.Rmd</code></a></small>
      <div class="hidden name"><code>The_OpenImageR_package.Rmd</code></div>

    </div>

    
    
<p>The following notes and examples illustrate the image processing
functions of the OpenImageR package.</p>
<div class="section level2">
<h2 id="basic-functions">Basic functions<a class="anchor" aria-label="anchor" href="#basic-functions"></a>
</h2>
<div class="section level4">
<h4 id="readimage">readImage<a class="anchor" aria-label="anchor" href="#readimage"></a>
</h4>
<p>The <em>readImage</em> function reads images from a variety of types
such as ‘png’, ‘jpeg’, ‘jpg’ or ‘tiff’,</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mlampros/OpenImageR" class="external-link">OpenImageR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'image1.jpeg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">im</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">im</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 496 487   3</span></span></code></pre>
<p><br></p>
</div>
<div class="section level4">
<h4 id="imageshow">imageShow<a class="anchor" aria-label="anchor" href="#imageshow"></a>
</h4>
<p>The <em>imageShow</em> function utilizes either a shiny application
(if the image is a character path) or the grid.raster function of the
base grid package (if the image is a 2- or 3-dimensional object where
the third dimension is equal to 3) to display images, <br><br></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">im</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-2-1.png" width="96"><br><br></p>
</div>
<div class="section level4">
<h4 id="writeimage">writeImage<a class="anchor" aria-label="anchor" href="#writeimage"></a>
</h4>
<p>The <em>writeImage</em> function writes a 2- or 3-dimensional object
(matrix, data frame or array where the third dimension is equal to 3) in
a user specified image format. The supported types are .png, .jpeg,
.jpg, .tiff. <br><br></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/writeImage.html">writeImage</a></span><span class="op">(</span><span class="va">im</span>, file_name <span class="op">=</span> <span class="st">'my_image.jpeg'</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level4">
<h4 id="rgb_2gray">rgb_2gray<a class="anchor" aria-label="anchor" href="#rgb_2gray"></a>
</h4>
<p>To convert an image from RGB to gray one can use the
<em>rgb_2gray</em> function, which takes a single argument (matrix, data
frame or array), <br><br></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'image2.jpg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">im</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">im</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-4-1.png" width="96"><br></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r2g</span> <span class="op">=</span> <span class="fu"><a href="../reference/rgb_2gray.html">rgb_2gray</a></span><span class="op">(</span><span class="va">im</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">r2g</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-5-1.png" width="96"><br><br></p>
</div>
<div class="section level4">
<h4 id="cropimage">cropImage<a class="anchor" aria-label="anchor" href="#cropimage"></a>
</h4>
<p>The <em>cropImage</em> function reduces the size of the image
horizontally and vertically. The function takes four arguments :
<em>image</em> (2- or 3-dimensional object where the third dimension is
equal to 3), <em>new_width</em> (the desired new width),
<em>new_height</em> (the desired new height) and <em>type</em>. While
the type <em>‘equal_spaced’</em> crops the image equally in both
directions (horizontal, vertical) towards the center of the image, the
type <em>‘user_defined’</em> allows the user to specify which regions of
the image should be kept <br><br></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eq_sp</span> <span class="op">=</span> <span class="fu"><a href="../reference/cropImage.html">cropImage</a></span><span class="op">(</span><span class="va">im</span>, new_width <span class="op">=</span> <span class="fl">200</span>, new_height <span class="op">=</span> <span class="fl">200</span>, type <span class="op">=</span> <span class="st">'equal_spaced'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">eq_sp</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-6-1.png" width="96"><br></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">us_def</span> <span class="op">=</span> <span class="fu"><a href="../reference/cropImage.html">cropImage</a></span><span class="op">(</span><span class="va">im</span>, new_width <span class="op">=</span> <span class="fl">20</span><span class="op">:</span><span class="fl">225</span>, new_height <span class="op">=</span> <span class="fl">5</span><span class="op">:</span><span class="fl">185</span>, type <span class="op">=</span> <span class="st">'user_defined'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">us_def</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-7-1.png" width="96"><br><br></p>
</div>
<div class="section level4">
<h4 id="flipimage">flipImage<a class="anchor" aria-label="anchor" href="#flipimage"></a>
</h4>
<p>A <a href="https://en.wikipedia.org/wiki/Flipped_image" class="external-link">flipped
image</a> (or reversed image) is a static or moving image that is
generated by a mirror-reversal of an original across a horizontal axis
(a flopped image is mirrored across the vertical axis). The first image
shows the original image and the second one a horizontal flip, <br><br></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'image1.jpeg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">im</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">im</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-8-1.png" width="96"><br><br></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flp_vert</span> <span class="op">=</span> <span class="fu"><a href="../reference/flipImage.html">flipImage</a></span><span class="op">(</span><span class="va">im</span>, mode <span class="op">=</span> <span class="st">'horizontal'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">flp_vert</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-9-1.png" width="96"><br><br></p>
</div>
<div class="section level4">
<h4 id="rotatefixed">rotateFixed<a class="anchor" aria-label="anchor" href="#rotatefixed"></a>
</h4>
<p>The <em>rotateFixed</em> function rotates an image by specific angles
(90, 180, 270). I added this function (besides the <em>rotateImage</em>
function) in the package, because it takes less time to return the
output, <br><br></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r270</span> <span class="op">=</span> <span class="fu"><a href="../reference/rotateFixed.html">rotateFixed</a></span><span class="op">(</span><span class="va">im</span>, <span class="fl">270</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">r270</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-10-1.png" width="96"><br><br></p>
</div>
<div class="section level4">
<h4 id="rotateimage">rotateImage<a class="anchor" aria-label="anchor" href="#rotateimage"></a>
</h4>
<p>The <em>rotateImage</em> function is more flexible in comparison to
the <em>rotateFixed</em> function. It allows the user to rotate an image
by a specific angle (between 0 and 360 degrees) using either the
‘nearest’ or the ‘bilinear’ interpolation method, <br><br></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r45</span> <span class="op">=</span> <span class="fu"><a href="../reference/rotateImage.html">rotateImage</a></span><span class="op">(</span><span class="va">im</span>, <span class="fl">45</span>, threads <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">r45</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-11-1.png" width="96"><br><br></p>
</div>
<div class="section level4">
<h4 id="resizeimage">resizeImage<a class="anchor" aria-label="anchor" href="#resizeimage"></a>
</h4>
<p>The <em>resizeImage</em> function takes advantage of two different
interpolation methods ( nearest neighbors, bilinear ) to either down- or
upsample an image, <br><br></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'image2.jpg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">im</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="va">intBl</span> <span class="op">=</span> <span class="fu"><a href="../reference/resizeImage.html">resizeImage</a></span><span class="op">(</span><span class="va">im</span>, width <span class="op">=</span> <span class="fl">100</span>, height <span class="op">=</span> <span class="fl">100</span>, method <span class="op">=</span> <span class="st">'bilinear'</span>, normalize_pixels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">intBl</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-12-1.png" width="96"><br><br></p>
<p>It is known that resizing an image using bilinear interpolation gives
better results, however the nearest neighbors method is faster. <br></p>
<p>A further option to resize an image is by using
<em>gaussian_blur</em> ( down-sampling gives better results than
up-sampling that’s why is the only option in the OpenImageR package ),
<br></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intGbl</span> <span class="op">=</span> <span class="fu"><a href="../reference/down_sample_image.html">down_sample_image</a></span><span class="op">(</span><span class="va">im</span>, factor <span class="op">=</span> <span class="fl">2.5</span>, gaussian_blur <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">intGbl</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-13-1.png" width="96"><br></p>
<p>The factor of the function applies equally to the horizontal and
vertical dimensions of the image. <br><br></p>
</div>
<div class="section level4">
<h4 id="translation">translation<a class="anchor" aria-label="anchor" href="#translation"></a>
</h4>
<p><strong>translation</strong> is the shifting of an object’s location
by adding/subtracting a value to/from the X or Y coordinates,</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tr</span> <span class="op">=</span> <span class="fu"><a href="../reference/translation.html">translation</a></span><span class="op">(</span><span class="va">im</span>, shift_rows <span class="op">=</span> <span class="fl">50</span>, shift_cols <span class="op">=</span> <span class="op">-</span><span class="fl">50</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">tr</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-14-1.png" width="96"><br></p>
</div>
</div>
<div class="section level2">
<h2 id="image-filtering">Image filtering<a class="anchor" aria-label="anchor" href="#image-filtering"></a>
</h2>
<div class="section level4">
<h4 id="edge_detection">edge_detection<a class="anchor" aria-label="anchor" href="#edge_detection"></a>
</h4>
<p>According to Wikipedia, edge detection is the name for a set of
mathematical methods which aim at identifying points in a digital image
at which the image brightness changes sharply or, more formally, has
discontinuities. The <em>edge_detection</em> function uses one of the
<em>Frei_chen</em>, <em>LoG (Laplacian of Gaussian)</em>,
<em>Prewitt</em>, <em>Roberts_cross</em>, <em>Scharr</em> or
<em>Sobel</em> filters to perform edge detection, <br></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'image1.jpeg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">im</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="va">edsc</span> <span class="op">=</span> <span class="fu"><a href="../reference/edge_detection.html">edge_detection</a></span><span class="op">(</span><span class="va">im</span>, method <span class="op">=</span> <span class="st">'Scharr'</span>, conv_mode <span class="op">=</span> <span class="st">'same'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">edsc</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-15-1.png" width="96"><br></p>
</div>
<div class="section level4">
<h4 id="uniform_filter">uniform_filter<a class="anchor" aria-label="anchor" href="#uniform_filter"></a>
</h4>
<p>In a <em>uniform filter</em> all the values within the filter
(kernel) have the same weight,</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">kernel_size</span> <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="va">unf</span> <span class="op">=</span> <span class="fu"><a href="../reference/uniform_filter.html">uniform_filter</a></span><span class="op">(</span><span class="va">im</span>, size <span class="op">=</span> <span class="va">kernel_size</span>, conv_mode <span class="op">=</span> <span class="st">'same'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">unif_filt</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span>, ncol <span class="op">=</span> <span class="va">kernel_size</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, nrow <span class="op">=</span> <span class="va">kernel_size</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="va">kernel_size</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">kernel_size</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">unif_filt</span></span></code></pre></div>
<pre><code><span><span class="co">##        [,1]   [,2]   [,3]   [,4]</span></span>
<span><span class="co">## [1,] 0.0625 0.0625 0.0625 0.0625</span></span>
<span><span class="co">## [2,] 0.0625 0.0625 0.0625 0.0625</span></span>
<span><span class="co">## [3,] 0.0625 0.0625 0.0625 0.0625</span></span>
<span><span class="co">## [4,] 0.0625 0.0625 0.0625 0.0625</span></span></code></pre>
<p><br><br></p>
</div>
<div class="section level4">
<h4 id="image_thresholding">image_thresholding<a class="anchor" aria-label="anchor" href="#image_thresholding"></a>
</h4>
<p>According to Wikipedia, <em>thresholding</em> is the simplest method
of image segmentation. From a grayscale image, thresholding can be used
to create binary images,</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'image2.jpg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">im</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="va">thr</span> <span class="op">=</span> <span class="fu"><a href="../reference/image_thresholding.html">image_thresholding</a></span><span class="op">(</span><span class="va">im</span>, thresh <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>           <span class="co"># if the input image is 3-dimensional it will be converted internally to a matrix</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">thr</span><span class="op">)</span></span></code></pre></div>
<p><br><br></p>
</div>
<div class="section level4">
<h4 id="gamma_correction">gamma_correction<a class="anchor" aria-label="anchor" href="#gamma_correction"></a>
</h4>
<p><em>Gamma correction</em>, or often simply gamma, is the name of a
nonlinear operation used to encode and decode luminance or tristimulus
values in video or still image systems (Wikipedia),</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gcor</span> <span class="op">=</span> <span class="fu"><a href="../reference/gamma_correction.html">gamma_correction</a></span><span class="op">(</span><span class="va">im</span>, gamma <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>        <span class="co"># show image with gamma correction </span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">gcor</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-19-1.png" width="96"><br><br></p>
</div>
<div class="section level4">
<h4 id="zcawhiten">ZCAwhiten<a class="anchor" aria-label="anchor" href="#zcawhiten"></a>
</h4>
<p><a href="http://ufldl.stanford.edu/wiki/index.php/Whitening" class="external-link"><strong>Whitening</strong>
(or sphering)</a> is the preprocessing needed for some algorithms. If we
are training on images, the raw input is redundant, since adjacent pixel
values are highly correlated. The purpose of whitening is to reduce the
correlation between features and to return features with the same
variance,</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../reference/ZCAwhiten.html">ZCAwhiten</a></span><span class="op">(</span><span class="va">im</span>, k <span class="op">=</span> <span class="fl">20</span>, epsilon <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-20-1.png" width="96"><br><br></p>
</div>
<div class="section level4">
<h4 id="dilationerosion">dilationErosion<a class="anchor" aria-label="anchor" href="#dilationerosion"></a>
</h4>
<p><a href="https://www.mathworks.com/help/images/morphological-dilation-and-erosion.html" class="external-link"><strong>Dilation</strong>
and <strong>erosion</strong></a> are the most basic morphological
operations. Dilation adds pixels to the boundaries of objects in an
image, while erosion removes pixels on object boundaries,</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res_delate</span> <span class="op">=</span> <span class="fu"><a href="../reference/dilationErosion.html">dilationErosion</a></span><span class="op">(</span><span class="va">im</span>, Filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>,<span class="fl">8</span><span class="op">)</span>, method <span class="op">=</span> <span class="st">'dilation'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">res_delate</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-21-1.png" width="96"><br><br></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res_erosion</span> <span class="op">=</span> <span class="fu"><a href="../reference/dilationErosion.html">dilationErosion</a></span><span class="op">(</span><span class="va">im</span>, Filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>,<span class="fl">8</span><span class="op">)</span>, method <span class="op">=</span> <span class="st">'erosion'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">res_erosion</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-22-1.png" width="96"><br><br></p>
</div>
<div class="section level4">
<h4 id="augmentation">Augmentation<a class="anchor" aria-label="anchor" href="#augmentation"></a>
</h4>
<p>Augmentations are specific transformations applied to an image. The
<strong>Augmentation</strong> function allows the user to <em>flip</em>,
<em>crop</em>, <em>resize</em>, <em>shift</em>, <em>rotate</em>,
<em>zca-whiten</em> and <em>threshold</em> an image. It either returns a
single image,</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'image1.jpeg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">im</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">im</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 496 487   3</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">augm</span> <span class="op">=</span> <span class="fu"><a href="../reference/Augmentation.html">Augmentation</a></span><span class="op">(</span><span class="va">im</span>, flip_mode <span class="op">=</span> <span class="st">'horizontal'</span>, crop_width <span class="op">=</span> <span class="fl">20</span><span class="op">:</span><span class="fl">460</span>, crop_height <span class="op">=</span> <span class="fl">30</span><span class="op">:</span><span class="fl">450</span>, </span>
<span>                    </span>
<span>                    resiz_width <span class="op">=</span> <span class="fl">180</span>, resiz_height <span class="op">=</span> <span class="fl">180</span>, resiz_method <span class="op">=</span> <span class="st">'bilinear'</span>, </span>
<span>                    </span>
<span>                    shift_rows <span class="op">=</span> <span class="fl">0</span>, shift_cols <span class="op">=</span> <span class="fl">0</span>, rotate_angle <span class="op">=</span> <span class="fl">350</span>, </span>
<span>                    </span>
<span>                    rotate_method <span class="op">=</span> <span class="st">'bilinear'</span>, zca_comps <span class="op">=</span> <span class="fl">100</span>, </span>
<span>                    </span>
<span>                    zca_epsilon <span class="op">=</span> <span class="fl">0.1</span>, image_thresh <span class="op">=</span> <span class="fl">0.0</span>, verbose <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## time to complete : 0.1171021 secs</span></span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">augm</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-23-1.png" width="96"><br><br></p>
<p>or multiple transformed images using either pre-specified or random
parameters (here I utilized the lapply function),</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># random rotations</span></span>
<span><span class="va">samp_rot</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">90</span>, <span class="fl">30</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">270</span>, <span class="fl">350</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span>, <span class="fl">3</span>, replace <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># random shift of rows</span></span>
<span><span class="va">samp_shif_rows</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">50</span>, <span class="fl">50</span>, <span class="fl">10</span><span class="op">)</span>, <span class="fl">3</span>, replace <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># random shift of columns</span></span>
<span><span class="va">samp_shif_cols</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">50</span>, <span class="fl">50</span>, <span class="fl">10</span><span class="op">)</span>, <span class="fl">3</span>, replace <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">samp_rot</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> </span>
<span>  </span>
<span>  <span class="fu"><a href="../reference/Augmentation.html">Augmentation</a></span><span class="op">(</span><span class="va">im</span>, flip_mode <span class="op">=</span> <span class="st">'horizontal'</span>, crop_width <span class="op">=</span> <span class="fl">20</span><span class="op">:</span><span class="fl">460</span>, crop_height <span class="op">=</span> <span class="fl">30</span><span class="op">:</span><span class="fl">450</span>, </span>
<span>               </span>
<span>               resiz_width <span class="op">=</span> <span class="fl">180</span>, resiz_height <span class="op">=</span> <span class="fl">180</span>, resiz_method <span class="op">=</span> <span class="st">'bilinear'</span>, </span>
<span>                    </span>
<span>               shift_rows <span class="op">=</span> <span class="va">samp_shif_rows</span><span class="op">[</span><span class="va">x</span><span class="op">]</span>, shift_cols <span class="op">=</span> <span class="va">samp_shif_cols</span><span class="op">[</span><span class="va">x</span><span class="op">]</span>, </span>
<span>               </span>
<span>               rotate_angle <span class="op">=</span> <span class="va">samp_rot</span><span class="op">[</span><span class="va">x</span><span class="op">]</span>, rotate_method <span class="op">=</span> <span class="st">'bilinear'</span>, zca_comps <span class="op">=</span> <span class="fl">100</span>, </span>
<span>              </span>
<span>               zca_epsilon <span class="op">=</span> <span class="fl">0.1</span>, image_thresh <span class="op">=</span> <span class="fl">0.0</span>, verbose <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 3</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">res</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-24-1.png" width="96"><br><br></p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">res</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-25-1.png" width="96"><br><br></p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">res</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-26-1.png" width="96"><br><br></p>
</div>
</div>
<div class="section level2">
<h2 id="image-recognition">Image recognition<a class="anchor" aria-label="anchor" href="#image-recognition"></a>
</h2>
<div class="section level4">
<h4 id="hog-histogram-of-oriented-gradients">HOG ( histogram of oriented gradients )<a class="anchor" aria-label="anchor" href="#hog-histogram-of-oriented-gradients"></a>
</h4>
<p>The histogram of oriented gradients (HOG) is a feature descriptor
used in computer vision and image processing for the purpose of object
detection. The technique counts occurrences of gradient orientation in
localized portions of an image. This method is similar to that of edge
orientation histograms, scale-invariant feature transform descriptors,
and shape contexts, but differs in that it is computed on a dense grid
of uniformly spaced cells and uses overlapping local contrast
normalization for improved accuracy (Wikipedia). <br></p>
<p>The <em>HOG</em> function of the OpenImageR package is a modification
and extention of the <a href="https://github.com/lastlegion/SimpleCV/blob/develop/SimpleCV/ImageClass.py" class="external-link">findHOGFeatures</a>
function ( SimpleCV computer vision platform ), please, consult the
COPYRIGHT file. <br><br></p>
<p>The purpose of the function is to create a vector of HOG descriptors,
which can be used in classification tasks. It takes either RGB (they
will be converted to gray) or gray images as input,</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'image2.jpg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">image</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="va">image</span> <span class="op">=</span> <span class="va">image</span> <span class="op">*</span> <span class="fl">255</span></span>
<span></span>
<span><span class="va">hog</span> <span class="op">=</span> <span class="fu"><a href="../reference/HOG.html">HOG</a></span><span class="op">(</span><span class="va">image</span>, cells <span class="op">=</span> <span class="fl">3</span>, orientations <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">hog</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] 0.77469214 1.14086503 2.31889250 1.23273279 2.11969315 2.18888603</span></span>
<span><span class="co">##  [7] 0.98545254 2.01819644 1.45363031 1.57426901 1.30780262 1.46335968</span></span>
<span><span class="co">## [13] 2.02599281 1.34299739 0.67503592 2.00988275 1.17642965 0.45404311</span></span>
<span><span class="co">## [19] 1.88303677 0.84543358 0.91915814 1.57235148 1.63834676 0.71412684</span></span>
<span><span class="co">## [25] 1.02893068 2.34523001 1.87588867 1.29156373 3.25841836 1.45814321</span></span>
<span><span class="co">## [31] 0.72214449 1.31669539 2.11007710 0.69881074 0.44783304 1.65003799</span></span>
<span><span class="co">## [37] 0.47865256 0.43020737 0.30637683 0.15287033 0.88481912 0.25718794</span></span>
<span><span class="co">## [43] 0.49127802 0.29067277 0.17552517 0.09544067 0.25962132 0.48733020</span></span>
<span><span class="co">## [49] 0.52154428 0.61910760 0.03944711 0.05271813 0.04068158 0.15660130</span></span></code></pre>
<p><br></p>
</div>
<div class="section level4">
<h4 id="hog_apply">HOG_apply<a class="anchor" aria-label="anchor" href="#hog_apply"></a>
</h4>
<p>The <em>HOG_apply</em> function uses the previous mentioned HOG
function to return the HOG-descriptors for the following objects :</p>
<ul>
<li>a <strong>matrix</strong> of images such as the mnist data set,
where each row represents a different digit (28 x 28 image)</li>
<li>an <strong>array</strong>, where each slice represents a different
image</li>
<li>a <strong>folder of images</strong> where each file is a different
image</li>
</ul>
<p>In the following code chunk I’ll apply the HOG function to an array
of images. The result is a matrix, where each row respresents the
HOG-descriptors for each array slice (image),</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_im1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'image1.jpeg'</span><span class="op">)</span></span>
<span><span class="va">path_im2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'image2.jpg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tmp_im1</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path_im1</span><span class="op">)</span></span>
<span><span class="va">tmp_im2</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path_im2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tmp_im1</span> <span class="op">=</span> <span class="fu"><a href="../reference/resizeImage.html">resizeImage</a></span><span class="op">(</span><span class="va">tmp_im1</span>, <span class="fl">200</span>, <span class="fl">200</span>, normalize_pixels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">tmp_im2</span> <span class="op">=</span> <span class="fu"><a href="../reference/resizeImage.html">resizeImage</a></span><span class="op">(</span><span class="va">tmp_im2</span>, <span class="fl">200</span>, <span class="fl">200</span>, normalize_pixels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tmp_gray1</span> <span class="op">=</span> <span class="fu"><a href="../reference/rgb_2gray.html">rgb_2gray</a></span><span class="op">(</span><span class="va">tmp_im1</span><span class="op">)</span></span>
<span><span class="va">tmp_gray2</span> <span class="op">=</span> <span class="fu"><a href="../reference/rgb_2gray.html">rgb_2gray</a></span><span class="op">(</span><span class="va">tmp_im2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">tmp_gray2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 200 200</span></span></code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp_arr</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">tmp_gray1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">tmp_gray1</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tmp_arr</span><span class="op">[</span>,,<span class="fl">1</span><span class="op">]</span> <span class="op">=</span> <span class="va">tmp_gray1</span></span>
<span><span class="va">tmp_arr</span><span class="op">[</span>,,<span class="fl">2</span><span class="op">]</span> <span class="op">=</span> <span class="va">tmp_gray2</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="../reference/HOG_apply.html">HOG_apply</a></span><span class="op">(</span><span class="va">tmp_arr</span>, cells <span class="op">=</span> <span class="fl">2</span>, orientations <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## time to complete : 0.01502299 secs</span></span></code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span></span></code></pre></div>
<pre><code><span><span class="co">##            [,1]       [,2]       [,3]       [,4]       [,5]       [,6]</span></span>
<span><span class="co">## [1,] 0.03483613 0.04196114 0.04612695 0.04140325 0.04309913 0.04109847</span></span>
<span><span class="co">## [2,] 0.02451697 0.03900987 0.03382551 0.02726853 0.03312162 0.02102826</span></span>
<span><span class="co">##            [,7]       [,8]       [,9]      [,10]      [,11]      [,12]</span></span>
<span><span class="co">## [1,] 0.03420407 0.03928073 0.04142536 0.03453907 0.02951086 0.02247319</span></span>
<span><span class="co">## [2,] 0.01256165 0.01003306 0.01500769 0.01639543 0.01053641 0.01457517</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="image-hashing">
<a href="https://www.hackerfactor.com/blog/?/archives/432-Looks-Like-It.html" class="external-link">image
hashing</a><a class="anchor" aria-label="anchor" href="#image-hashing"></a>
</h3>
<p>The image hashing functions (<em>average_hash</em>, <em>dhash</em>,
<em>phash</em>, <em>invariant_hash</em>, <em>hash_apply</em>) of the
OpenImageR package are implemented in the way <strong>perceptual
hashing</strong> works. Perceptual hashing is the use of an algorithm
that produces a fingerprint of images (in OpenImageR those fingerprints
are <em>binary features</em> or <em>hexadecimal hashes</em>). The
difference between cryptographic and image hashing is that the latter
tries to find similar and not exact matches. In cryptographic hashing
small differences of the hashes lead to entirely different output, which
is not the case for perceptual hashing. A practical application of image
hashing would be to compare a database of already created image hashes
with a new hash (image) to find similar images in the database.</p>
<p>The <em>average_hash</em>, <em>dhash</em> and <em>phash</em>
functions of the OpenImageR package are modifications and extentions of
the <a href="https://github.com/JohannesBuchner/imagehash" class="external-link">ImageHash</a>
python library, please, consult the COPYRIGHT file. <br><br></p>
<div class="section level6">
<h6 id="average_hash">average_hash<a class="anchor" aria-label="anchor" href="#average_hash"></a>
</h6>
<p>The <strong>average hash</strong> algorithm of the OpenImageR package
works in the following way : 1st we convert to grayscale, 2nd we reduce
the size of an image (for instance to an 8x8 image), 3rd we average the
resulting colors (for an 8x8 image we average 64 colors), 4th we compute
the bits by comparing if each color value is above or below the mean and
5th we construct the hash. The result of the <em>average_hash</em>
function can be either a <strong>hexadecimal hash</strong> (string) or
<strong>binary features</strong>,</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'view1.jpg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">image</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">image</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-29-1.png" width="96"></p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">image</span> <span class="op">=</span> <span class="fu"><a href="../reference/rgb_2gray.html">rgb_2gray</a></span><span class="op">(</span><span class="va">image</span><span class="op">)</span></span>
<span></span>
<span><span class="va">aveg_hash</span> <span class="op">=</span> <span class="fu"><a href="../reference/average_hash.html">average_hash</a></span><span class="op">(</span><span class="va">image</span>, hash_size <span class="op">=</span> <span class="fl">8</span>, MODE <span class="op">=</span> <span class="st">'hash'</span>, resize <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span></span>
<span><span class="va">aveg_hash</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "ffffffde08000000"</span></span></code></pre>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aveg_bin</span> <span class="op">=</span> <span class="fu"><a href="../reference/average_hash.html">average_hash</a></span><span class="op">(</span><span class="va">image</span>, hash_size <span class="op">=</span> <span class="fl">8</span>, MODE <span class="op">=</span> <span class="st">'binary'</span>, resize <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">aveg_bin</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 1 1 1 1 0 1 1 0 0 0 1 0 0</span></span>
<span><span class="co">## [39] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></span></code></pre>
<p><br></p>
</div>
<div class="section level6">
<h6 id="phash">phash<a class="anchor" aria-label="anchor" href="#phash"></a>
</h6>
<p>While the average_hash is fast, it can generate false-misses if there
is a gamma correction or a color histogram is applied to the image. The
<strong>phash</strong> algorithm extends the average_hash by using the
<em>discrete cosine transform</em> to reduce the frequencies,</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'view2.jpg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">image2</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">image2</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-30-1.png" width="96"></p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">image2</span> <span class="op">=</span> <span class="fu"><a href="../reference/rgb_2gray.html">rgb_2gray</a></span><span class="op">(</span><span class="va">image2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ph_hash</span> <span class="op">=</span> <span class="fu"><a href="../reference/phash.html">phash</a></span><span class="op">(</span><span class="va">image2</span>, hash_size <span class="op">=</span> <span class="fl">8</span>, highfreq_factor <span class="op">=</span> <span class="fl">4</span>, MODE <span class="op">=</span> <span class="st">'hash'</span>, resize <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span></span>
<span><span class="va">ph_hash</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "5b63ecacb1a258c9"</span></span></code></pre>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ph_bin</span> <span class="op">=</span> <span class="fu"><a href="../reference/phash.html">phash</a></span><span class="op">(</span><span class="va">image2</span>, hash_size <span class="op">=</span> <span class="fl">8</span>, highfreq_factor <span class="op">=</span> <span class="fl">4</span>, MODE <span class="op">=</span> <span class="st">'binary'</span>, resize <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">ph_bin</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] 1 1 0 1 1 0 1 0 1 1 0 0 0 1 1 0 0 0 1 1 0 1 1 1 0 0 1 1 0 1 0 1 1 0 0 0 1 1</span></span>
<span><span class="co">## [39] 0 1 0 1 0 0 0 1 0 1 0 0 0 1 1 0 1 0 1 0 0 1 0 0 1 1</span></span></code></pre>
<p><br></p>
</div>
<div class="section level6">
<h6 id="dhash">
<a href="https://www.hackerfactor.com/blog/index.php?/archives/529-Kind-of-Like-That.html" class="external-link">dhash</a><a class="anchor" aria-label="anchor" href="#dhash"></a>
</h6>
<p>In comparison to average_hash and phash, the <strong>dhash</strong>
algorithm takes into consideration the difference between adjacent
pixels. In the same way as with the average_hash, the resulting hash
won’t change if the image is scaled or the aspect ratio changes.
Increasing or decreasing the brightness or contrast, or even altering
the colors won’t dramatically change the hash value. Even complex
adjustments like gamma corrections and color profiles won’t impact the
result,</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'vignette_1'</span>, <span class="st">'view3.jpg'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">image3</span> <span class="op">=</span> <span class="fu"><a href="../reference/readImage.html">readImage</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">image3</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-31-1.png" width="96"></p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">image3a</span> <span class="op">=</span> <span class="fu"><a href="../reference/rgb_2gray.html">rgb_2gray</a></span><span class="op">(</span><span class="va">image3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dh_hash</span> <span class="op">=</span> <span class="fu"><a href="../reference/dhash.html">dhash</a></span><span class="op">(</span><span class="va">image3a</span>, hash_size <span class="op">=</span> <span class="fl">8</span>, MODE <span class="op">=</span> <span class="st">'hash'</span>, resize <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span></span>
<span><span class="va">dh_hash</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "57d49449a2d71d6a"</span></span></code></pre>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dh_bin</span> <span class="op">=</span> <span class="fu"><a href="../reference/dhash.html">dhash</a></span><span class="op">(</span><span class="va">image3a</span>, hash_size <span class="op">=</span> <span class="fl">8</span>, MODE <span class="op">=</span> <span class="st">'binary'</span>, resize <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">dh_bin</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] 1 1 1 0 1 0 1 0 0 0 1 0 1 0 1 1 0 0 1 0 1 0 0 1 1 0 0 1 0 0 1 0 0 1 0 0 0 1</span></span>
<span><span class="co">## [39] 0 1 1 1 1 0 1 0 1 1 1 0 1 1 1 0 0 0 0 1 0 1 0 1 1 0</span></span></code></pre>
<p><br></p>
<p>By adding a gamma correction we can check if the hash value or the
binary features of the <em>view3.jpg</em> will be altered,</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp_image3</span> <span class="op">=</span> <span class="fu"><a href="../reference/gamma_correction.html">gamma_correction</a></span><span class="op">(</span><span class="va">image3</span>, gamma <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">tmp_image3</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-32-1.png" width="96"></p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp_image3</span> <span class="op">=</span> <span class="fu"><a href="../reference/rgb_2gray.html">rgb_2gray</a></span><span class="op">(</span><span class="va">tmp_image3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dh_hash_a</span> <span class="op">=</span> <span class="fu"><a href="../reference/dhash.html">dhash</a></span><span class="op">(</span><span class="va">tmp_image3</span>, hash_size <span class="op">=</span> <span class="fl">8</span>, MODE <span class="op">=</span> <span class="st">'hash'</span>, resize <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span></span>
<span><span class="va">dh_hash_a</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "57d49449a2d71d6a"</span></span></code></pre>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dh_bin_a</span> <span class="op">=</span> <span class="fu"><a href="../reference/dhash.html">dhash</a></span><span class="op">(</span><span class="va">tmp_image3</span>, hash_size <span class="op">=</span> <span class="fl">8</span>, MODE <span class="op">=</span> <span class="st">'binary'</span>, resize <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">dh_bin_a</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] 1 1 1 0 1 0 1 0 0 0 1 0 1 0 1 1 0 0 1 0 1 0 0 1 1 0 0 1 0 0 1 0 0 1 0 0 0 1</span></span>
<span><span class="co">## [39] 0 1 1 1 1 0 1 0 1 1 1 0 1 1 1 0 0 0 0 1 0 1 0 1 1 0</span></span></code></pre>
<p><br></p>
</div>
<div class="section level6">
<h6 id="invariant_hash">invariant_hash<a class="anchor" aria-label="anchor" href="#invariant_hash"></a>
</h6>
<p><strong>invariant_hash</strong> is an extension function for image
hashing. It takes two images as input (image1, image2) and by altering
one of those (random flipping, rotating and cropping) it calculates the
<em>hamming distance</em> (if the mode is ‘binary’) or the
<em>levenshtein distance</em> if (the mode is ‘hash’). If any of the
<em>flip</em>, <em>rotate</em>, <em>crop</em> equals TRUE then the
function returns the MIN,MAX similarity between the two images. If, on
the other hand all <em>flip</em>, <em>rotate</em>, <em>crop</em> equal
FALSE then a single similarity value is returned meaning no random
transformations of the second image are performed. <br><br></p>
<p>Although, in the previous example the gamma correction doesn’t
influence the dhash of the <em>view3.jpg</em>, a <em>horizontal
flip</em> of the image would change both the hash value and the binary
features considerably,</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">image3b</span> <span class="op">=</span> <span class="fu"><a href="../reference/flipImage.html">flipImage</a></span><span class="op">(</span><span class="va">image3</span>, mode <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/imageShow.html">imageShow</a></span><span class="op">(</span><span class="va">image3b</span><span class="op">)</span></span></code></pre></div>
<p><img src="The_OpenImageR_package_files/figure-html/unnamed-chunk-33-1.png" width="96"></p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">image3b</span> <span class="op">=</span> <span class="fu"><a href="../reference/rgb_2gray.html">rgb_2gray</a></span><span class="op">(</span><span class="va">image3b</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dh_hash_b</span> <span class="op">=</span> <span class="fu"><a href="../reference/dhash.html">dhash</a></span><span class="op">(</span><span class="va">image3b</span>, hash_size <span class="op">=</span> <span class="fl">8</span>, MODE <span class="op">=</span> <span class="st">'hash'</span>, resize <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span></span>
<span><span class="va">dh_hash_b</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "0a2a6b365d9a23d4"</span></span></code></pre>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dh_bin_b</span> <span class="op">=</span> <span class="fu"><a href="../reference/dhash.html">dhash</a></span><span class="op">(</span><span class="va">image3b</span>, hash_size <span class="op">=</span> <span class="fl">8</span>, MODE <span class="op">=</span> <span class="st">'binary'</span>, resize <span class="op">=</span> <span class="st">"bilinear"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">dh_bin_b</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] 0 1 0 1 0 0 0 0 0 1 0 1 0 1 0 0 1 1 0 1 0 1 1 0 0 1 1 0 1 1 0 0 1 0 1 1 1 0</span></span>
<span><span class="co">## [39] 1 0 0 1 0 1 1 0 0 1 1 1 0 0 0 1 0 0 0 0 1 0 1 0 1 1</span></span></code></pre>
<p><br></p>
<p>By using the <em>invariant hash</em> in this case with all the
available transformations (at the cost of computational time) we can
obtain minimum and maximum values for the hamming or the levenshtein
distance,</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inv_hash</span> <span class="op">=</span> <span class="fu"><a href="../reference/invariant_hash.html">invariant_hash</a></span><span class="op">(</span><span class="va">image3a</span>, <span class="va">image3b</span>, mode <span class="op">=</span> <span class="st">'binary'</span>, flip <span class="op">=</span> <span class="cn">T</span>, rotate <span class="op">=</span> <span class="cn">T</span>, </span>
<span>                          </span>
<span>                          angle_bidirectional <span class="op">=</span> <span class="fl">10</span>, crop <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">inv_hash</span></span></code></pre></div>
<pre><code><span><span class="co">##   min     max</span></span>
<span><span class="co">## 1   0 0.53125</span></span></code></pre>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inv_bin</span> <span class="op">=</span> <span class="fu"><a href="../reference/invariant_hash.html">invariant_hash</a></span><span class="op">(</span><span class="va">image3a</span>, <span class="va">image3b</span>, mode <span class="op">=</span> <span class="st">'hash'</span>, flip <span class="op">=</span> <span class="cn">T</span>, rotate <span class="op">=</span> <span class="cn">T</span>, </span>
<span>                         </span>
<span>                         angle_bidirectional <span class="op">=</span> <span class="fl">10</span>, crop <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">inv_bin</span></span></code></pre></div>
<pre><code><span><span class="co">##   min max</span></span>
<span><span class="co">## 1   0  15</span></span></code></pre>
<p>In both cases (hash, binary) a minimum value of 0 indicates perfect
matches between the two images among the transfomations.</p>
</div>
<div class="section level6">
<h6 id="hash_apply">hash_apply<a class="anchor" aria-label="anchor" href="#hash_apply"></a>
</h6>
<p>The <strong>hash_apply</strong> function applies the single
<em>average_hash</em>, <em>phash</em>, <em>dhash</em> to either a
matrix, array or folder of images. This function is practical in case of
a matrix of images such as the mnist, or the cifar_10 data sets, where
each line of the matrix corresponds to an image. Furthermore, if a
folder includes many images, then the <em>hexadecimal hash mode</em>
should be prefered, as it doesn’t require as much storage space as the
binary mode. The following example illustrates how <em>hash values</em>
and <em>binary features</em> can be computed from a folder of
images,</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'/TEST_hash/'</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">hapl_hash</span> <span class="op">=</span> <span class="fu"><a href="../reference/hash_apply.html">hash_apply</a></span><span class="op">(</span><span class="va">path</span>, hash_size <span class="op">=</span> <span class="fl">6</span>, method <span class="op">=</span> <span class="st">"dhash"</span>, mode <span class="op">=</span> <span class="st">"hash"</span>, threads <span class="op">=</span> <span class="fl">1</span>,  resize <span class="op">=</span> <span class="st">"nearest"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## time to complete : 0.01312399 secs</span></span></code></pre>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hapl_hash</span>                <span class="co"># returns both the names of the images and the hash values</span></span></code></pre></div>
<pre><code><span><span class="co">## $files</span></span>
<span><span class="co">##  [1] "2_1.png" "2_2.png" "2_3.png" "4_1.png" "4_2.png" "4_3.png" "5_1.png"</span></span>
<span><span class="co">##  [8] "5_2.png" "5_3.png" "8_1.png" "8_2.png" "8_3.png" "9_1.png" "9_2.png"</span></span>
<span><span class="co">## [15] "9_3.png"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $hash</span></span>
<span><span class="co">##  [1] "00008130" "00008130" "00008130" "0080a020" "0080a020" "0080a020"</span></span>
<span><span class="co">##  [7] "00006330" "00006330" "00006330" "0080a230" "0080a230" "0080a230"</span></span>
<span><span class="co">## [13] "4010a769" "4010a769" "4010a769"</span></span></code></pre>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hapl_bin</span> <span class="op">=</span> <span class="fu"><a href="../reference/hash_apply.html">hash_apply</a></span><span class="op">(</span><span class="va">path</span>, hash_size <span class="op">=</span> <span class="fl">6</span>, method <span class="op">=</span> <span class="st">"dhash"</span>, mode <span class="op">=</span> <span class="st">"binary"</span>, threads <span class="op">=</span> <span class="fl">1</span>,  resize <span class="op">=</span> <span class="st">"nearest"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## time to complete : 0.01187897 secs</span></span></code></pre>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hapl_bin</span><span class="op">$</span><span class="va">files</span>             <span class="co"># names of the images</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "2_1.png" "2_2.png" "2_3.png" "4_1.png" "4_2.png" "4_3.png" "5_1.png"</span></span>
<span><span class="co">##  [8] "5_2.png" "5_3.png" "8_1.png" "8_2.png" "8_3.png" "9_1.png" "9_2.png"</span></span>
<span><span class="co">## [15] "9_3.png"</span></span></code></pre>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">hapl_bin</span><span class="op">$</span><span class="va">hash</span><span class="op">)</span>         <span class="co"># dimensions of the resulted matrix</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 15 36</span></span></code></pre>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">hapl_bin</span><span class="op">$</span><span class="va">hash</span><span class="op">)</span>        <span class="co"># binary features</span></span></code></pre></div>
<pre><code><span><span class="co">##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]</span></span>
<span><span class="co">## [1,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0</span></span>
<span><span class="co">## [2,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0</span></span>
<span><span class="co">## [3,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0</span></span>
<span><span class="co">## [4,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0</span></span>
<span><span class="co">## [5,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0</span></span>
<span><span class="co">## [6,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0</span></span>
<span><span class="co">##      [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]</span></span>
<span><span class="co">## [1,]     0     0     1     0     0     0     0     0     0     1     0     0</span></span>
<span><span class="co">## [2,]     0     0     1     0     0     0     0     0     0     1     0     0</span></span>
<span><span class="co">## [3,]     0     0     1     0     0     0     0     0     0     1     0     0</span></span>
<span><span class="co">## [4,]     0     1     0     0     0     0     0     1     0     1     0     0</span></span>
<span><span class="co">## [5,]     0     1     0     0     0     0     0     1     0     1     0     0</span></span>
<span><span class="co">## [6,]     0     1     0     0     0     0     0     1     0     1     0     0</span></span>
<span><span class="co">##      [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36]</span></span>
<span><span class="co">## [1,]     0     0     1     1     0     0     1     1     0     1</span></span>
<span><span class="co">## [2,]     0     0     1     1     0     0     1     1     0     1</span></span>
<span><span class="co">## [3,]     0     0     1     1     0     0     1     1     0     1</span></span>
<span><span class="co">## [4,]     0     0     0     1     0     0     0     0     0     1</span></span>
<span><span class="co">## [5,]     0     0     0     1     0     0     0     0     0     1</span></span>
<span><span class="co">## [6,]     0     0     0     1     0     0     0     0     0     1</span></span></code></pre>
<p><br></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Lampros Mouselimis.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
